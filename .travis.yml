# This uses newer and faster docker based build system
sudo: false
language: php
notifications:
  on_success: never
  on_failure: change
php:
  - 7.2
env:
  global:
    - MYSQL_USER="root"
    - MYSQL_HOST="127.0.0.1"
    - MYSQL_PORT="3306"
  matrix:
    - MYSQL_IMAGE=mysql:5.5
    - MYSQL_IMAGE=mysql:5.6
    - MYSQL_IMAGE=mysql:5.7
    - WP_PROJECT_TYPE=plugin WP_VERSION=latest WP_MULTISITE=0 WP_TEST_URL=http://localhost:12000 WP_TEST_USER=test WP_TEST_USER_PASS=test
before_script:
  # Install composer packages before trying to activate themes or plugins
  # - composer install
  - git clone https://github.com/wilokecom/wordpress-test-travis.git wp-tests
  - bash bin/install-wp-tests.sh wp_test root '' 127.0.0.1 latest
script:
  - phpunit
